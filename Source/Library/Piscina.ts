import { dirname as Dir, resolve as Resolve } from "path";
import Piscina from "piscina";
import { fileURLToPath as Path } from "url";

const Current = Path(import.meta.url);

const Calculation = new Piscina({
	filename: Resolve(`${Dir(Current)}/../../Target/test/calculation.js`),
});

const _Function = new Piscina({
	filename: Resolve(`${Dir(Current)}/../../Target/test/function-call.js`),
});

await Promise.all([
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
	await Calculation.run({}),
	await _Function.run({}),
]);
